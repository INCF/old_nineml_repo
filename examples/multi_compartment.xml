<?xml version="1.0" encoding="UTF-8"?>
<NineML xmlns="http://nineml.net/9ML/1.0">
  <MultiCompartmentComponent name="ExampleMultiCompartmentModel">
    <Definition>ExampleMultiCompartmentClass</Definition>
    <Branches>
      <ExternalArrayValue url="./data/dendritic_branches.txt"
        mimetype="vnd.net.nineml.arrayvalue.text" columnName="parentID"/>
    </Branches>
    <Mapping>
      <ExternalArrayValue url="./data/dendritic_branches.txt"
        mimetype="vnd.net.nineml.arrayvalue.text" columnName="domain"/>
    </Mapping>
    <Domain name="soma">
      <MultiComponent name="somaDynamics">
        <SubComponent name="PyramidalNa">
          <Component>
            <Prototype url="http://nineml.net/catalog/channels">HHPyramidalNa</Prototype>
            <Property name="gbar" units="uS">
              <SingleValue>0.0036</SingleValue>
            </Property>
          </Component>
          <ReceivesConnection port="V">
            <FromComponent component="membrane" port="V"/>
          </ReceivesConnection>
        </SubComponent>
        <SubComponent name="PyramidalK">
          <Component>
            <Prototype url="http://nineml.net/catalog/channels">HHPyramidalK</Prototype>
            <Property name="gbar" units="uS">
              <SingleValue>0.0025</SingleValue>
            </Property>
          </Component>
          <ReceivesConnection port="V">
            <FromComponent component="membrane" port="V"/>
          </ReceivesConnection>
        </SubComponent>
        <SubComponent name="Kv4">
          <Component>
            <Prototype url="http://nineml.net/catalog/channels">HHPyramidalK</Prototype>
            <Property name="gbar" units="uS">
              <SingleValue>0.0025</SingleValue>
            </Property>
          </Component>
          <ReceivesConnection port="V">
            <FromComponent component="membrane" port="V"/>
          </ReceivesConnection>
        </SubComponent>
        <SubComponent name="leak">
          <Component>
            <Definition url="http://nineml.net/catalog/channels">Leak</Definition>
            <Property name="g" units="uS">
              <SingleValue>0.001</SingleValue>
            </Property>
            <Property name="e_rev" units="mV">
              <SingleValue>-21</SingleValue>
            </Property>
          </Component>
          <ReceivesConnection port="V">
            <FromComponent component="membrane" port="V"/>
          </ReceivesConnection>
        </SubComponent>
        <SubComponent name="membrane">
          <Component>
            <Definition url="http://nineml.net/catalog/channels">DefaultMembrane</Definition>
            <Property name="length" units="um">
              <SingleValue>15.0</SingleValue>
            </Property>
            <Property name="axialResistance" units="ohm_per_cm">
              <SingleValue>100.0</SingleValue>
            </Property>
            <Property name="diameter" units="um">
              <SingleValue>15.0</SingleValue>
            </Property>
            <Property name="C" units="uF">
              <SingleValue>1.0</SingleValue>
            </Property>
          </Component>
          <ReceivesConnection port="i">
            <FromComponent component="Na" name="i"/>
            <FromComponent component="K" name="i"/>
            <FromComponent component="leak" name="i"/>
          </ReceivesConnection>
        </SubComponent>
        <PortExposure name="proximalVoltage" component="membrane" port="proximalV"/>
        <PortExposure name="distalVoltage" component="membrane" port="distalV"/>
      </MultiComponent>
      <ReceivesConnection port="proximalVoltage">
        <FromProximal port="voltage"/>
      </ReceivesConnection>
      <ReceivesConnection port="distalVoltage">
        <FromDistal port="voltage"/>
      </ReceivesConnection>
    </Domain>
    <Domain name="dendrites">
      <Reference>DendriteDynamics</Reference>
      <ReceivesConnection port="proximalVoltage">
        <FromProximal port="voltage"/>
      </ReceivesConnection>
      <ReceivesConnection port="distalVoltage">
        <FromDistal port="voltage"/>
      </ReceivesConnection>
      <ReceivesConnection port="withinDendritesReducePort">
        <FromProximal domain="dendrites" port="withinDendritesSendPort"/>
        <FromDistal domain="dendrites" port="withinDendritesSendPort"/>
      </ReceivesConnection>
    </Domain>
    <Annotations>
      <Points3D>
        <XCoords>
          <ExternalArrayValue url="./data/dendritic_branches.txt"
            mimetype="vnd.net.nineml.arrayvalue.text" columnName="X"/>
        </XCoords>
        <YCoords>
          <ExternalArrayValue url="./data/dendritic_branches.txt"
            mimetype="vnd.net.nineml.arrayvalue.text" columnName="Y"/>
        </YCoords>
        <ZCoords>
          <ExternalArrayValue url="./data/dendritic_branches.txt"
            mimetype="vnd.net.nineml.arrayvalue.text" columnName="Z"/>
        </ZCoords>
      </Points3D>
    </Annotations>
  </MultiCompartmentComponent>
</NineML>
